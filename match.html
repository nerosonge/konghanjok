<!DOCTYPE html>
<html lang="ko">
<head>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WL5RWLPL');</script>
<!-- End Google Tag Manager -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI ë§¤ì¹­ | ì½©í•œìª½</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #1a0f0f;
      --bg-gradient: radial-gradient(120% 120% at 10% 10%, #2d1515 0%, #1a0f0f 40%, #0d0808 100%);
      --surface: rgba(255, 255, 255, 0.08);
      --surface-strong: rgba(255, 255, 255, 0.12);
      --ink: #f5e6e6;
      --muted: #a08080;
      --brand: #c0392b;
      --brand-strong: #922b21;
      --accent: #27ae60;
      --border: rgba(160, 80, 80, 0.2);
      --radius-md: 20px;
      --radius-sm: 14px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Noto Sans KR', sans-serif;
      background: var(--bg);
      background-image: var(--bg-gradient);
      color: var(--ink);
      min-height: 100vh;
      padding: 16px;
      overflow-x: hidden;
    }

    .shell {
      max-width: 480px;
      margin: 0 auto;
      padding: 24px 0;
    }

    .back {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--muted);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 24px;
    }
    .back:hover { color: var(--brand-strong); }

    h1 {
      font-size: 1.5rem;
      margin: 0 0 24px;
      font-weight: 800;
    }

    .card {
      background: var(--surface-strong);
      border-radius: var(--radius-md);
      padding: 24px;
      border: 1px solid var(--border);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }

    .input-group label {
      display: block;
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 0.95rem;
    }

    .input-group select,
    .input-group input {
      width: 100%;
      padding: 14px 16px;
      border-radius: var(--radius-sm);
      border: 2px solid rgba(160, 80, 80, 0.35);
      background: rgba(255, 255, 255, 0.95);
      font-size: 1.05rem;
      font-weight: 500;
      color: #1a0f0f;
    }
    .input-group select:focus,
    .input-group input:focus {
      outline: none;
      border-color: var(--brand);
      background: #fff;
    }
    .input-group select option {
      color: #1a0f0f;
      background: #fff;
    }

    .input-group + .input-group { margin-top: 18px; }

    .slider-row { display: flex; align-items: center; gap: 12px; }
    .slider-row input[type="range"] { flex: 1; }
    .slider-value { font-weight: 700; color: var(--brand-strong); min-width: 64px; text-align: right; }

    .btn {
      width: 100%;
      padding: 18px;
      border-radius: var(--radius-sm);
      border: none;
      font-weight: 700;
      font-size: 1.05rem;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      margin-top: 24px;
    }

    .btn-primary {
      background: linear-gradient(130deg, var(--brand-strong), var(--brand));
      color: #fff;
      box-shadow: 0 16px 34px rgba(91, 95, 251, 0.28);
    }
    .btn-primary:hover { transform: translateY(-1px); }

    .match-result {
      min-height: 120px;
      display: grid;
      gap: 14px;
      justify-items: center;
      text-align: center;
    }

    .match-result #resultContent {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }

    .match-result .match-profile {
      text-align: center;
    }

    .result-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(91, 95, 251, 0.12);
      color: var(--brand-strong);
      font-weight: 600;
      font-size: 0.9rem;
    }

    .match-profile {
      padding: 18px;
      border-radius: var(--radius-sm);
      background: rgba(91, 95, 251, 0.08);
      border: 1px solid var(--border);
    }

    .match-profile h3 { margin: 0 0 8px; font-size: 1.1rem; }
    .match-meta { font-size: 0.9rem; color: var(--muted); display: grid; gap: 4px; }
    .compatibility {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      border-radius: var(--radius-sm);
      background: rgba(39, 174, 96, 0.2);
      color: var(--accent);
      font-weight: 700;
      margin-top: 14px;
    }

    .match-profile h3,
    .match-meta { color: var(--ink); }

    .game-entry-wrap { margin-top: 20px; display: flex; justify-content: center; width: 100%; }
    .game-entry-wrap .btn { margin-top: 0; }

    .hidden { display: none !important; }

    @media (min-width: 480px) {
      body { padding: 24px; }
      .card { padding: 28px; }
    }
  </style>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WL5RWLPL"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
  <div class="shell">
    <a class="back" href="index.html">â† ë©”ì¸ìœ¼ë¡œ</a>
    <h1>AI ë§¤ì¹­</h1>

    <form class="card match-form" id="match-form">
      <div class="input-group">
        <label for="model">ë³´ìœ  ì¤‘ì¸ ëª¨ë¸</label>
        <select id="model" name="model" required>
          <option value="AirPods Pro 2">AirPods Pro 2</option>
          <option value="AirPods Pro 1">AirPods Pro 1</option>
          <option value="AirPods 3">AirPods 3</option>
          <option value="AirPods 2">AirPods 2</option>
        </select>
      </div>
      <div class="input-group">
        <label for="side">ë³´ìœ  ì¤‘ì¸ ë°©í–¥</label>
        <select id="side" name="side" required>
          <option value="left">ì¢Œì¸¡ë§Œ ë‚¨ì•˜ì–´ìš”</option>
          <option value="right">ìš°ì¸¡ë§Œ ë‚¨ì•˜ì–´ìš”</option>
        </select>
      </div>
      <div class="input-group">
        <label for="condition">ë‚´ ì—ì–´íŒŸ ì»¨ë””ì…˜</label>
        <select id="condition" name="condition" required>
          <option value="S">Sê¸‰ Â· ê±°ì˜ ìƒˆê²ƒ</option>
          <option value="A">Aê¸‰ Â· ìƒí™œê¸°ìŠ¤ ì •ë„</option>
          <option value="B">Bê¸‰ Â· ëˆˆì— ë„ëŠ” ì‚¬ìš©ê°</option>
        </select>
      </div>
      <div class="input-group">
        <label for="usageMonths">ì‚¬ìš© ê¸°ê°„</label>
        <div class="slider-row">
          <input type="range" id="usageMonths" name="usageMonths" min="0" max="36" step="1" value="8">
          <span class="slider-value" id="usageValue">8ê°œì›”</span>
        </div>
      </div>
      <button class="btn btn-primary" type="submit">AI ë§¤ì¹­ ëŒë¦¬ê¸°</button>
    </form>

    <aside class="card match-result hidden" id="match-result">
      <span class="result-badge" id="resultBadge">ğŸ¯ ë§¤ì¹­ ê²°ê³¼</span>
      <div id="resultContent"></div>
      <div class="game-entry-wrap hidden" id="gameEntryWrap">
        <a class="btn btn-primary" href="destiny.html" id="gameEntryBtn">ê²Œì„ ì…ì¥í•˜ê¸°</a>
      </div>
    </aside>
  </div>

  <script>
    const usageInput = document.getElementById('usageMonths');
    const usageValue = document.getElementById('usageValue');
    const matchForm = document.getElementById('match-form');
    const matchResult = document.getElementById('match-result');
    const resultContent = document.getElementById('resultContent');
    const gameEntryWrap = document.getElementById('gameEntryWrap');

    const partnerPool = [
      { name: 'ìœ¤ì„œ', model: 'AirPods Pro 2', side: 'right', usageMonths: 9, condition: 'S', distance: 'ì„œìš¸ ì„±ìˆ˜ë™', vibe: 'ì¶œí‡´ê·¼ ëŸ¬ë„ˆ', message: 'ì§€í•˜ì² ì—ì„œ ì˜¤ë¥¸ìª½ í•œ ìª½ì„ ìƒì–´ë²„ë ¸ì–´ìš”. ì¢Œì¸¡ë§Œ ë‚¨ì•˜ìŠµë‹ˆë‹¤!' },
      { name: 'ì§€í˜¸', model: 'AirPods Pro 2', side: 'left', usageMonths: 6, condition: 'A', distance: 'ë¶€ì‚° ì„œë©´', vibe: 'ë°´ë“œ ë“œëŸ¬ë¨¸', message: 'ê³µì—° ëë‚˜ê³  ì •ì‹ ì—†ì´ ì±™ê¸°ë‹¤ í•œ ìª½ì´ ì‚¬ë¼ì¡Œì–´ìš”.' },
      { name: 'í˜œë¦¼', model: 'AirPods 3', side: 'right', usageMonths: 10, condition: 'A', distance: 'ëŒ€êµ¬ ë™ì„±ë¡œ', vibe: 'ì½˜í…ì¸  ë§ˆì¼€í„°', message: 'ì˜¤ë¥¸ìª½ë§Œ ë‚¨ì•„ì„œ ë“œë¼ë§ˆ ëª°ì…ë„ê°€ 50%ë¡œ ì¤„ì—ˆì–´ìš”!' },
      { name: 'ë¯¼í›„', model: 'AirPods 3', side: 'left', usageMonths: 12, condition: 'B', distance: 'ì„œìš¸ ì—°ë‚¨ë™', vibe: 'ì¹´í˜ íˆ¬ì–´ëŸ¬', message: 'ì¹´í˜ì—ì„œ ì¶©ì „í•˜ë‹¤ê°€ ëˆ„ê°€ ê°€ì ¸ê°”ëŠ”ì§€ ì˜¤ë¥¸ìª½ì´ ì—†ì–´ì¡Œì–´ìš”.' },
      { name: 'ì†Œì—°', model: 'AirPods Pro 1', side: 'right', usageMonths: 18, condition: 'B', distance: 'ì¸ì²œ ì†¡ë„', vibe: 'í•„ë¼í…ŒìŠ¤ ëŸ¬ë²„', message: 'í•„ë¼í…ŒìŠ¤ ì¥ë¹„ ì‚¬ì´ë¡œ êµ´ëŸ¬ê°„ ê²ƒ ê°™ì•„ìš”. ì™¼ìª½ë§Œ ì‚´ì•˜ìŠµë‹ˆë‹¤.' },
      { name: 'íƒœì¤€', model: 'AirPods Pro 1', side: 'left', usageMonths: 16, condition: 'A', distance: 'ëŒ€ì „ ë‘”ì‚°ë™', vibe: 'ê²Œì„ ìŠ¤íŠ¸ë¦¬ë¨¸', message: 'ìƒˆë²½ ë°©ì†¡í•˜ë‹¤ê°€ ì™¼ìª½ì´ ê°‘ìê¸° ì¹¨ëŒ€ ë°‘ìœ¼ë¡œ ì‚¬ë¼ì¡Œì–´ìš”.' },
      { name: 'ë‹¤ì€', model: 'AirPods 2', side: 'right', usageMonths: 20, condition: 'B', distance: 'ê²½ì£¼ í™©ì„±ë™', vibe: 'ì—¬í–‰ í¬ë¦¬ì—ì´í„°', message: 'ì—¬í–‰ ì¤‘ì— ë–¨ì–´ëœ¨ë ¤ì„œ ì˜¤ë¥¸ìª½ì´ ê³ ë³„ì¸ì‚¬í–ˆì–´ìš”.' },
      { name: 'ì •ìš°', model: 'AirPods 2', side: 'left', usageMonths: 14, condition: 'A', distance: 'ì„œìš¸ ê´‘í™”ë¬¸', vibe: 'ë„ì‹¬ í¬í† ê·¸ë˜í¼', message: 'ì°ë‹¤ê°€ ë¶€ì‚°í•˜ê²Œ ì›€ì§ì´ë‹¤ ì™¼ìª½ë§Œ ì‚´ì•„ë‚¨ì•˜ìŠµë‹ˆë‹¤.' }
    ];

    const conditionLabel = { S: 'Sê¸‰ Â· ê±°ì˜ ìƒˆê²ƒ', A: 'Aê¸‰ Â· ìƒí™œê¸°ìŠ¤ ì •ë„', B: 'Bê¸‰ Â· ëˆˆì— ë„ëŠ” ì‚¬ìš©ê°' };

    usageInput.addEventListener('input', () => {
      usageValue.textContent = usageInput.value + 'ê°œì›”';
    });

    matchForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(matchForm);
      const model = formData.get('model');
      const haveSide = formData.get('side');
      const needSide = haveSide === 'left' ? 'right' : 'left';
      const condition = formData.get('condition');
      const usageMonths = Number(formData.get('usageMonths'));

      const candidates = partnerPool
        .filter((p) => p.model === model && p.side === needSide)
        .map((p) => {
          const usageGap = Math.abs(p.usageMonths - usageMonths);
          const conditionGap = Math.abs(p.condition.charCodeAt(0) - condition.charCodeAt(0));
          const score = usageGap * 2 + conditionGap * 5;
          const compatibility = Math.max(48, Math.round(100 - score * 3));
          return { ...p, score, compatibility };
        })
        .sort((a, b) => a.score - b.score);

      if (candidates.length === 0) {
        sessionStorage.setItem('matchPending', JSON.stringify({ noMatch: true }));
        location.href = 'matching.html';
        return;
      }

      const best = candidates[0];
      const payload = {
        mySide: haveSide,
        model: model,
        condition: condition,
        oppModel: best.model,
        oppSide: best.side,
        oppCondition: best.condition
      };
      sessionStorage.setItem('matchPending', JSON.stringify(payload));
      location.href = 'matching.html';
    });
  </script>
</body>
</html>
